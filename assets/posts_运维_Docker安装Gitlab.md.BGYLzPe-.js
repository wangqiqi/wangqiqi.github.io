import{_ as i,c as a,o as t,a5 as l}from"./chunks/framework.BB9qmTK0.js";const F=JSON.parse('{"title":"Docker安装Gitlab","description":"","frontmatter":{"layout":"doc","title":"Docker安装Gitlab","date":"2023-01-01T00:00:00.000Z","categories":["运维","Docker"],"tags":["Docker","Gitlab","DevOps"],"lastUpdated":true,"sidebar":true},"headers":[],"relativePath":"posts/运维/Docker安装Gitlab.md","filePath":"posts/运维/Docker安装Gitlab.md","lastUpdated":1760322573000}'),h={name:"posts/运维/Docker安装Gitlab.md"};function e(n,s,k,p,r,g){return t(),a("div",null,[...s[0]||(s[0]=[l(`<hr><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to “安装”">​</a></h2><p><a href="https://docs.gitlab.com/ee/install/docker.html" target="_blank" rel="noreferrer">Docker安装Gitlab官方文档</a></p><p><strong>Gitlab</strong> 分为了 <em>gitlab-ee</em> 和 <em>gitlab-ce</em> 两个版本，经过权衡比较，还是使用 <em>gitlab-ee</em> 版本，因为 <em>gitlab-ee</em> 版本包含了<em>gitlab-ce</em>版本的所有功能，其他功能以后想升级更容易；</p><p><strong>1. 拉取镜像</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  gitlab/gitlab-ee</span></span></code></pre></div><p><strong>2. 配置存放卷的路径</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /srv/docker/gitlab-ee/config /srv/docker/gitlab-ee/logs /srv/docker/gitlab-ee/data</span></span></code></pre></div><p><strong>3. 构建容器</strong><em>多行代码</em></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --detach</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--publish </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8443:443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10084:10084</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--publish </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8222:22</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--name </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--restart </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--volume </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/docker/gitlab-ee/config:/etc/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--volume </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/docker/gitlab-ee/logs:/var/log/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--volume </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/srv/docker/gitlab-ee/data:/var/opt/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gitlab/gitlab-ee:latest</span></span></code></pre></div><p><em>单行代码</em></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --detach</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8443:443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10084:10084</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8222:22</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /srv/docker/gitlab-ee/config:/etc/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /srv/docker/gitlab-ee/logs:/var/log/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /srv/docker/gitlab-ee/data:/var/opt/gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab/gitlab-ee:latest</span></span></code></pre></div><p><em><strong>NOTE:</strong></em>构建完成后需要修改<code>config</code>下面的<code>gitlab.rb</code>文件</p><p><strong>4. 修改配置文件</strong> 在<code>gitlab.rb</code>文件中新增</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">external_url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;http://192.168.0.86:10084&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 换成自己的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;gitlab_shell_ssh_port&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8222</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的</span></span></code></pre></div><p><strong>修改完文件后，重新配置容器</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab-ctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reconfigure</span></span></code></pre></div><p><strong>重启容器</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span></span></code></pre></div><h2 id="docker-进入gitlab修改密码" tabindex="-1">docker 进入gitlab修改密码 <a class="header-anchor" href="#docker-进入gitlab修改密码" aria-label="Permalink to “docker 进入gitlab修改密码”">​</a></h2><p>一般情况下，不用修改密码，在<code>config</code>文件夹下有一个文件叫<code>initial_root_password</code>, 里面存放了最初始的密码，24小时内有效，请登录后及时修改到方便记忆的密码；</p><ol><li>进入gitlab容器内</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span></span></code></pre></div><ol start="2"><li>一次执行下面的命令：</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab-rails</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> User.where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.first</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user.password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ‘password’</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user.password_confirmation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ‘password’</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user.save!</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><h2 id="邮箱配置" tabindex="-1">邮箱配置 <a class="header-anchor" href="#邮箱配置" aria-label="Permalink to “邮箱配置”">​</a></h2><p>主要用于gitlab 日常使用中邮件通知服务</p><p><strong>1.修改配置文件,建议使用企业邮箱</strong> 修改文件 <code>gitlab.rb</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_enable&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_address&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;smtp.qiye.aliyun.com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_port&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 465</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_user_name&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gitlab@example.com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的域名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_password&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gitlab_pw&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 换成自己的密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_domain&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;smtp.qiye.aliyun.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_authentication&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;login&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_enable_starttls_auto&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;smtp_tls&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gitlab_rails[&#39;smtp_pool&#39;] = false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gitlab_rails[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;gitlab_email_from&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;send_from&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 换成自己的</span></span></code></pre></div><p><strong>测试</strong><em>开启 gitlab 的 bash 工具</em></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><p><em>开启 gitlab-rails 工具</em></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab-rails</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span></code></pre></div><p><em>发送邮件进行测试</em></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Notify.test_email(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;test@xxx.com&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Message Subject&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Message Body&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).deliver_now</span></span></code></pre></div><p><strong>重新配置与重启</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab-ctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reconfigure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span></span></code></pre></div><h2 id="【参考】" tabindex="-1">【参考】 <a class="header-anchor" href="#【参考】" aria-label="Permalink to “【参考】”">​</a></h2><ol><li><a href="https://www.cnblogs.com/lijinchang/p/12695372.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/lijinchang/p/12695372.html</a></li><li><a href="https://blog.csdn.net/cxy_LG/article/details/102967804" target="_blank" rel="noreferrer">https://blog.csdn.net/cxy_LG/article/details/102967804</a></li><li><a href="https://zhuanlan.zhihu.com/p/342136826" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/342136826</a></li><li><a href="https://blog.csdn.net/ming19951224/article/details/105479033" target="_blank" rel="noreferrer">https://blog.csdn.net/ming19951224/article/details/105479033</a></li><li><a href="https://bbs.csdn.net/topics/397131190" target="_blank" rel="noreferrer">https://bbs.csdn.net/topics/397131190</a></li><li><a href="https://blog.csdn.net/sasibingdu/article/details/120076226" target="_blank" rel="noreferrer">https://blog.csdn.net/sasibingdu/article/details/120076226</a></li><li><a href="https://blog.csdn.net/polywg/article/details/113935318" target="_blank" rel="noreferrer">配置邮箱</a></li><li><a href="https://zhuanlan.zhihu.com/p/328795102" target="_blank" rel="noreferrer">docker下gitlab安装与配置</a></li></ol>`,39)])])}const o=i(h,[["render",e]]);export{F as __pageData,o as default};
