import{_ as i,c as a,o as n,a5 as h}from"./chunks/framework.BB9qmTK0.js";const g=JSON.parse('{"title":"02-å¼‚å¸¸å¤„ç†è¿›é˜¶-ç»ƒä¹ ","description":"","frontmatter":{"layout":"doc","lastUpdated":true,"sidebar":true,"title":"02-å¼‚å¸¸å¤„ç†è¿›é˜¶-ç»ƒä¹ ","categories":["æ•™ç¨‹"],"tags":["ç¼–ç¨‹æ•™ç¨‹","Python"]},"headers":[],"relativePath":"æ•™ç¨‹/Pythoné­”æ³•å­¦é™¢/01-è¿›é˜¶é˜¶æ®µ/02-å¼‚å¸¸å¤„ç†è¿›é˜¶/02-å¼‚å¸¸å¤„ç†è¿›é˜¶-ç»ƒä¹ .md","filePath":"æ•™ç¨‹/Pythoné­”æ³•å­¦é™¢/01-è¿›é˜¶é˜¶æ®µ/02-å¼‚å¸¸å¤„ç†è¿›é˜¶/02-å¼‚å¸¸å¤„ç†è¿›é˜¶-ç»ƒä¹ .md","lastUpdated":1766846201000}'),l={name:"æ•™ç¨‹/Pythoné­”æ³•å­¦é™¢/01-è¿›é˜¶é˜¶æ®µ/02-å¼‚å¸¸å¤„ç†è¿›é˜¶/02-å¼‚å¸¸å¤„ç†è¿›é˜¶-ç»ƒä¹ .md"};function t(k,s,p,e,r,E){return n(),a("div",null,[...s[0]||(s[0]=[h(`<h1 id="ğŸ¯-é«˜çº§é­”æ³•å¸ˆå®æˆ˜-å¼‚å¸¸å¤„ç†è¿›é˜¶ç»ƒä¹ " tabindex="-1">ğŸ¯ é«˜çº§é­”æ³•å¸ˆå®æˆ˜ï¼šå¼‚å¸¸å¤„ç†è¿›é˜¶ç»ƒä¹  <a class="header-anchor" href="#ğŸ¯-é«˜çº§é­”æ³•å¸ˆå®æˆ˜-å¼‚å¸¸å¤„ç†è¿›é˜¶ç»ƒä¹ " aria-label="Permalink to â€œğŸ¯ é«˜çº§é­”æ³•å¸ˆå®æˆ˜ï¼šå¼‚å¸¸å¤„ç†è¿›é˜¶ç»ƒä¹ â€">â€‹</a></h1><p>ğŸ‰ æ¬¢è¿æ¥åˆ°å¼‚å¸¸å¤„ç†è¿›é˜¶çš„ç»ƒä¹ ç¯èŠ‚ï¼é€šè¿‡è¿™äº›ç»ƒä¹ ï¼Œä½ å°†å·©å›ºPythonå¼‚å¸¸å¤„ç†çš„é«˜çº§ç‰¹æ€§ï¼ŒæŒæ¡è‡ªå®šä¹‰å¼‚å¸¸ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€å¼‚å¸¸é“¾ç­‰å®ç”¨æŠ€å·§ï¼Œè®©ä½ çš„ä»£ç æ›´åŠ å¥å£®å¯é ã€‚</p><h2 id="ğŸ¯-ç»ƒä¹ ç›®æ ‡" tabindex="-1">ğŸ¯ ç»ƒä¹ ç›®æ ‡ <a class="header-anchor" href="#ğŸ¯-ç»ƒä¹ ç›®æ ‡" aria-label="Permalink to â€œğŸ¯ ç»ƒä¹ ç›®æ ‡â€">â€‹</a></h2><p>å®Œæˆè¿™äº›ç»ƒä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>ç†Ÿç»ƒæŒæ¡å¼‚å¸¸çš„æ•è·ã€å¤„ç†å’Œä¼ æ’­æœºåˆ¶</li><li>åˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ç±»åŠå…¶å±‚æ¬¡ç»“æ„</li><li>è®¾è®¡å’Œå®ç°è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨</li><li>åº”ç”¨å¼‚å¸¸å¤„ç†çš„æœ€ä½³å®è·µ</li><li>å¤„ç†å®é™…åº”ç”¨åœºæ™¯ä¸­çš„å¼‚å¸¸æƒ…å†µ</li></ul><h2 id="ğŸ“-åŸºç¡€ç»ƒä¹ " tabindex="-1">ğŸ“ åŸºç¡€ç»ƒä¹  <a class="header-anchor" href="#ğŸ“-åŸºç¡€ç»ƒä¹ " aria-label="Permalink to â€œğŸ“ åŸºç¡€ç»ƒä¹ â€">â€‹</a></h2><h3 id="ç»ƒä¹ 1-å¼‚å¸¸çš„æ•è·ä¸å¤„ç†" tabindex="-1">ç»ƒä¹ 1ï¼šå¼‚å¸¸çš„æ•è·ä¸å¤„ç† <a class="header-anchor" href="#ç»ƒä¹ 1-å¼‚å¸¸çš„æ•è·ä¸å¤„ç†" aria-label="Permalink to â€œç»ƒä¹ 1ï¼šå¼‚å¸¸çš„æ•è·ä¸å¤„ç†â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šç¼–å†™ä¸€ä¸ªå‡½æ•° <code>calculate_average(numbers)</code>ï¼Œç”¨äºè®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰æ•°å­—çš„å¹³å‡å€¼ã€‚å‡½æ•°éœ€è¦å¤„ç†ä»¥ä¸‹å¼‚å¸¸æƒ…å†µï¼š</p><ol><li>å¦‚æœè¾“å…¥ä¸æ˜¯åˆ—è¡¨ï¼ŒæŠ›å‡º <code>TypeError</code> å¼‚å¸¸</li><li>å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼ŒæŠ›å‡º <code>ValueError</code> å¼‚å¸¸</li><li>å¦‚æœåˆ—è¡¨ä¸­åŒ…å«éæ•°å­—å…ƒç´ ï¼Œè·³è¿‡è¿™äº›å…ƒç´ å¹¶ç»§ç»­è®¡ç®—</li><li>å¦‚æœè¿‡æ»¤åæ²¡æœ‰æœ‰æ•ˆæ•°å­—ï¼Œè¿”å› <code>None</code> å¹¶æ‰“å°æç¤ºä¿¡æ¯</li></ol><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­£å¸¸æƒ…å†µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">average </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> calculate_average([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(average)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡º: 3.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŒ…å«éæ•°å­—å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">average </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> calculate_average([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;three&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(average)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡º: 3.0 (è·³è¿‡äº†&quot;three&quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç©ºåˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># calculate_average([])  # åº”æŠ›å‡º ValueError å¼‚å¸¸</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éåˆ—è¡¨è¾“å…¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># calculate_average(123)  # åº”æŠ›å‡º TypeError å¼‚å¸¸</span></span></code></pre></div><h3 id="ç»ƒä¹ 2-è‡ªå®šä¹‰å¼‚å¸¸" tabindex="-1">ç»ƒä¹ 2ï¼šè‡ªå®šä¹‰å¼‚å¸¸ <a class="header-anchor" href="#ç»ƒä¹ 2-è‡ªå®šä¹‰å¼‚å¸¸" aria-label="Permalink to â€œç»ƒä¹ 2ï¼šè‡ªå®šä¹‰å¼‚å¸¸â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œç”¨äºå¤„ç†ä¸€ä¸ªç®€å•çš„åœ¨çº¿å•†åŸç³»ç»Ÿä¸­çš„é”™è¯¯æƒ…å†µã€‚</p><ol><li>åˆ›å»ºåŸºç¡€å¼‚å¸¸ç±» <code>ShoppingError</code></li><li>åˆ›å»ºä¸¤ä¸ªå­ç±»ï¼š<code>ProductError</code> å’Œ <code>OrderError</code></li><li>ä¸ºæ¯ä¸ªå­ç±»åˆ›å»ºæ›´å…·ä½“çš„å¼‚å¸¸ï¼Œä¾‹å¦‚ï¼š <ul><li><code>ProductNotFoundError</code>ï¼ˆæ‰¾ä¸åˆ°å•†å“ï¼‰</li><li><code>ProductOutOfStockError</code>ï¼ˆå•†å“ç¼ºè´§ï¼‰</li><li><code>OrderValidationError</code>ï¼ˆè®¢å•éªŒè¯é”™è¯¯ï¼‰</li><li><code>PaymentError</code>ï¼ˆæ”¯ä»˜é”™è¯¯ï¼‰</li></ul></li><li>å®ç°ä¸€ä¸ªç®€å•çš„å‡½æ•° <code>place_order(product_id, quantity)</code>ï¼Œæ ¹æ®ä¸åŒæƒ…å†µæŠ›å‡ºç›¸åº”çš„å¼‚å¸¸</li></ol><p><strong>è¦æ±‚</strong>ï¼šæ¯ä¸ªè‡ªå®šä¹‰å¼‚å¸¸éƒ½åº”è¯¥åŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥è¢«å•ç‹¬æ•è·å’Œå¤„ç†ã€‚</p><h3 id="ç»ƒä¹ 3-å¼‚å¸¸é“¾" tabindex="-1">ç»ƒä¹ 3ï¼šå¼‚å¸¸é“¾ <a class="header-anchor" href="#ç»ƒä¹ 3-å¼‚å¸¸é“¾" aria-label="Permalink to â€œç»ƒä¹ 3ï¼šå¼‚å¸¸é“¾â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šç¼–å†™ä¸€ä¸ªå‡½æ•° <code>read_configuration(filename)</code>ï¼Œç”¨äºä»é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚å‡½æ•°éœ€è¦ï¼š</p><ol><li>å°è¯•æ‰“å¼€å¹¶è¯»å–æŒ‡å®šçš„æ–‡ä»¶</li><li>ä½¿ç”¨ <code>json</code> æ¨¡å—è§£ææ–‡ä»¶å†…å®¹</li><li>å½“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œåˆ›å»ºå¼‚å¸¸é“¾ï¼Œä¿ç•™åŸå§‹å¼‚å¸¸ä¿¡æ¯</li><li>å¤„ç†ä»¥ä¸‹å¼‚å¸¸æƒ…å†µï¼š <ul><li>æ–‡ä»¶ä¸å­˜åœ¨ (<code>FileNotFoundError</code>) -&gt; æŠ›å‡º <code>ConfigurationError</code></li><li>æ–‡ä»¶æ ¼å¼é”™è¯¯ (<code>json.JSONDecodeError</code>) -&gt; æŠ›å‡º <code>ConfigurationError</code></li><li>æƒé™é”™è¯¯ (<code>PermissionError</code>) -&gt; æŠ›å‡º <code>ConfigurationError</code></li></ul></li></ol><p><strong>æç¤º</strong>ï¼šä½¿ç”¨ <code>raise ... from</code> è¯­æ³•åˆ›å»ºå¼‚å¸¸é“¾ã€‚</p><h3 id="ç»ƒä¹ 4-ä¸Šä¸‹æ–‡ç®¡ç†å™¨" tabindex="-1">ç»ƒä¹ 4ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨ <a class="header-anchor" href="#ç»ƒä¹ 4-ä¸Šä¸‹æ–‡ç®¡ç†å™¨" aria-label="Permalink to â€œç»ƒä¹ 4ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ <code>TimerContext</code>ï¼Œç”¨äºæµ‹é‡ä»£ç å—çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p><strong>è¦æ±‚</strong>ï¼š</p><ol><li>å®ç° <code>__enter__</code> å’Œ <code>__exit__</code> æ–¹æ³•</li><li>åœ¨ <code>__enter__</code> æ–¹æ³•ä¸­è®°å½•å¼€å§‹æ—¶é—´</li><li>åœ¨ <code>__exit__</code> æ–¹æ³•ä¸­è®¡ç®—å¹¶æ‰“å°æ‰§è¡Œæ—¶é—´</li><li>ç¡®ä¿å³ä½¿ä»£ç å—ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œä¹Ÿèƒ½æ­£ç¡®è®¡ç®—å’Œæ˜¾ç¤ºæ‰§è¡Œæ—¶é—´</li></ol><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TimerContext(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‰§è¡Œè®¡ç®—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºç±»ä¼¼äº: æ‰§è¡Œè®¡ç®—: 0.1234ç§’</span></span></code></pre></div><h3 id="ç»ƒä¹ 5-ä½¿ç”¨-contextlib-åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨" tabindex="-1">ç»ƒä¹ 5ï¼šä½¿ç”¨ contextlib åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ <a class="header-anchor" href="#ç»ƒä¹ 5-ä½¿ç”¨-contextlib-åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨" aria-label="Permalink to â€œç»ƒä¹ 5ï¼šä½¿ç”¨ contextlib åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šä½¿ç”¨ <code>contextlib.contextmanager</code> è£…é¥°å™¨åˆ›å»ºä¸€ä¸ªåä¸º <code>temporary_directory</code> çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨äºï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•</li><li>åœ¨ <code>with</code> è¯­å¥å—ä¸­ä½¿ç”¨è¿™ä¸ªç›®å½•</li><li>æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œåœ¨é€€å‡º <code>with</code> è¯­å¥å—æ—¶è‡ªåŠ¨åˆ é™¤è¿™ä¸ªä¸´æ—¶ç›®å½•</li></ol><p><strong>æç¤º</strong>ï¼šä½¿ç”¨ <code>tempfile</code> å’Œ <code>shutil</code> æ¨¡å—æ¥åˆ›å»ºå’Œåˆ é™¤ä¸´æ—¶ç›®å½•ã€‚</p><h2 id="ğŸš€-æŒ‘æˆ˜é¢˜" tabindex="-1">ğŸš€ æŒ‘æˆ˜é¢˜ <a class="header-anchor" href="#ğŸš€-æŒ‘æˆ˜é¢˜" aria-label="Permalink to â€œğŸš€ æŒ‘æˆ˜é¢˜â€">â€‹</a></h2><h3 id="æŒ‘æˆ˜é¢˜1-æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨" tabindex="-1">æŒ‘æˆ˜é¢˜1ï¼šæ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ <a class="header-anchor" href="#æŒ‘æˆ˜é¢˜1-æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨" aria-label="Permalink to â€œæŒ‘æˆ˜é¢˜1ï¼šæ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šåˆ›å»ºä¸€ä¸ªé«˜çº§æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ <code>SafeFile</code>ï¼Œç”¨äºå®‰å…¨åœ°è¿›è¡Œæ–‡ä»¶è¯»å†™æ“ä½œã€‚</p><p><strong>è¦æ±‚</strong>ï¼š</p><ol><li>æ”¯æŒ <code>read</code>ã€<code>write</code> å’Œ <code>append</code> ä¸‰ç§æ¨¡å¼</li><li>è‡ªåŠ¨å¤„ç†æ–‡ä»¶æ‰“å¼€å’Œå…³é—­</li><li>æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯</li><li>æ”¯æŒ <code>with</code> è¯­å¥çš„åµŒå¥—ä½¿ç”¨</li><li>å®ç°è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼šå½“ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶çš„å¤‡ä»½</li></ol><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SafeFile(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.write(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œæ–‡ä»¶ä»ä¼šè¢«æ­£ç¡®å…³é—­ï¼Œå¹¶ä¸”åŸå§‹æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¼šè¢«å¤‡ä»½</span></span></code></pre></div><h3 id="æŒ‘æˆ˜é¢˜2-æ•°æ®åº“äº‹åŠ¡ç®¡ç†" tabindex="-1">æŒ‘æˆ˜é¢˜2ï¼šæ•°æ®åº“äº‹åŠ¡ç®¡ç† <a class="header-anchor" href="#æŒ‘æˆ˜é¢˜2-æ•°æ®åº“äº‹åŠ¡ç®¡ç†" aria-label="Permalink to â€œæŒ‘æˆ˜é¢˜2ï¼šæ•°æ®åº“äº‹åŠ¡ç®¡ç†â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ç®¡ç†ä¸Šä¸‹æ–‡ç®¡ç†å™¨ <code>DatabaseTransaction</code>ï¼Œç”¨äºå¤„ç†æ•°æ®åº“äº‹åŠ¡ã€‚</p><p><strong>è¦æ±‚</strong>ï¼š</p><ol><li>æ”¯æŒè‡ªåŠ¨æäº¤å’Œå›æ»šåŠŸèƒ½</li><li>åœ¨ <code>with</code> è¯­å¥å—å†…æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­</li><li>å¦‚æœ <code>with</code> è¯­å¥å—æ­£å¸¸å®Œæˆï¼Œè‡ªåŠ¨æäº¤äº‹åŠ¡</li><li>å¦‚æœ <code>with</code> è¯­å¥å—ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œè‡ªåŠ¨å›æ»šäº‹åŠ¡</li><li>æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—è®°å½•</li></ol><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DatabaseTransaction(connection) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tx:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tx.execute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tx.execute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UPDATE accounts SET balance = balance - 100 WHERE user_id = ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å¦‚æœä¸¤ä¸ªæ“ä½œéƒ½æˆåŠŸï¼Œè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼›å¦‚æœä»»ä¸€æ“ä½œå¤±è´¥ï¼Œè‡ªåŠ¨å›æ»š</span></span></code></pre></div><h2 id="ğŸ”§-å®è·µåº”ç”¨" tabindex="-1">ğŸ”§ å®è·µåº”ç”¨ <a class="header-anchor" href="#ğŸ”§-å®è·µåº”ç”¨" aria-label="Permalink to â€œğŸ”§ å®è·µåº”ç”¨â€">â€‹</a></h2><h3 id="åº”ç”¨åœºæ™¯-api-é”™è¯¯å¤„ç†" tabindex="-1">åº”ç”¨åœºæ™¯ï¼šAPI é”™è¯¯å¤„ç† <a class="header-anchor" href="#åº”ç”¨åœºæ™¯-api-é”™è¯¯å¤„ç†" aria-label="Permalink to â€œåº”ç”¨åœºæ™¯ï¼šAPI é”™è¯¯å¤„ç†â€">â€‹</a></h3><p><strong>ä»»åŠ¡</strong>ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„ API é”™è¯¯å¤„ç†ç³»ç»Ÿï¼Œç”¨äºå¤„ç† Web åº”ç”¨ä¸­çš„å„ç§é”™è¯¯æƒ…å†µã€‚</p><p><strong>è¦æ±‚</strong>ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ API å¼‚å¸¸å±‚æ¬¡ç»“æ„</li><li>å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œå°†å¼‚å¸¸è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„ JSON å“åº”</li><li>ä¸ºä¸åŒç±»å‹çš„é”™è¯¯æä¾›ä¸åŒçš„ HTTP çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯</li><li>å®ç°é”™è¯¯æ—¥å¿—è®°å½•åŠŸèƒ½</li><li>æä¾›è¯¦ç»†çš„é”™è¯¯æ–‡æ¡£ï¼Œå¸®åŠ©å®¢æˆ·ç«¯å¼€å‘è€…ç†è§£å’Œè§£å†³é—®é¢˜</li></ol><p><strong>ç¤ºä¾‹ç»“æ„</strong>ï¼š</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºç¡€ API å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> APIException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SERVER_ERROR&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error_code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, status_code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error_code: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.error_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error_code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> status_code: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> status_code</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.message)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç‰¹å®šç±»å‹çš„ API å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BadRequestError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">APIException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;BAD_REQUEST&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;è¯·æ±‚å‚æ•°é”™è¯¯&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NotFoundError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">APIException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;NOT_FOUND&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›´å¤šå¼‚å¸¸ç±»...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ˆä»¥ Flask ä¸ºä¾‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@app.errorhandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(APIException)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle_api_exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: error.error_code,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: error.message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®°å½•é”™è¯¯æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    logger.error(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API Error: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error.error_code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> - </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error.message</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exc_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsonify(response), error.status_code</span></span></code></pre></div><h2 id="ğŸ’¡-éƒ¨åˆ†å‚è€ƒå®ç°" tabindex="-1">ğŸ’¡ éƒ¨åˆ†å‚è€ƒå®ç° <a class="header-anchor" href="#ğŸ’¡-éƒ¨åˆ†å‚è€ƒå®ç°" aria-label="Permalink to â€œğŸ’¡ éƒ¨åˆ†å‚è€ƒå®ç°â€">â€‹</a></h2><h3 id="ç»ƒä¹ 1-å¼‚å¸¸çš„æ•è·ä¸å¤„ç†-å‚è€ƒå®ç°" tabindex="-1">ç»ƒä¹ 1ï¼šå¼‚å¸¸çš„æ•è·ä¸å¤„ç†ï¼ˆå‚è€ƒå®ç°ï¼‰ <a class="header-anchor" href="#ç»ƒä¹ 1-å¼‚å¸¸çš„æ•è·ä¸å¤„ç†-å‚è€ƒå®ç°" aria-label="Permalink to â€œç»ƒä¹ 1ï¼šå¼‚å¸¸çš„æ•è·ä¸å¤„ç†ï¼ˆå‚è€ƒå®ç°ï¼‰â€">â€‹</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> calculate_average</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(numbers):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isinstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(numbers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TypeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¾“å…¥å¿…é¡»æ˜¯åˆ—è¡¨ç±»å‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numbers:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ—è¡¨ä¸èƒ½ä¸ºç©º&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    valid_numbers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numbers:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å°è¯•å°†å…ƒç´ è½¬æ¢ä¸ºæµ®ç‚¹æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            valid_numbers.append(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TypeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # è·³è¿‡éæ•°å­—å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            continue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid_numbers:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è­¦å‘Š: åˆ—è¡¨ä¸­æ²¡æœ‰æœ‰æ•ˆçš„æ•°å­—å…ƒç´ &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(valid_numbers) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(valid_numbers)</span></span></code></pre></div><h3 id="ç»ƒä¹ 2-è‡ªå®šä¹‰å¼‚å¸¸-å‚è€ƒå®ç°" tabindex="-1">ç»ƒä¹ 2ï¼šè‡ªå®šä¹‰å¼‚å¸¸ï¼ˆå‚è€ƒå®ç°ï¼‰ <a class="header-anchor" href="#ç»ƒä¹ 2-è‡ªå®šä¹‰å¼‚å¸¸-å‚è€ƒå®ç°" aria-label="Permalink to â€œç»ƒä¹ 2ï¼šè‡ªå®šä¹‰å¼‚å¸¸ï¼ˆå‚è€ƒå®ç°ï¼‰â€">â€‹</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºç¡€å¼‚å¸¸ç±»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShoppingError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è´­ç‰©ç³»ç»ŸåŸºç¡€å¼‚å¸¸&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•†å“ç›¸å…³å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ShoppingError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å•†å“ç›¸å…³å¼‚å¸¸&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductNotFoundError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProductError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å•†å“æœªæ‰¾åˆ°å¼‚å¸¸&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, product_id):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product_id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ‰¾ä¸åˆ°å•†å“ ID: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">product_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductOutOfStockError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProductError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å•†å“ç¼ºè´§å¼‚å¸¸&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, product_id, requested_quantity, available_quantity):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product_id</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.requested_quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requested_quantity</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.available_quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> available_quantity</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å•†å“ ID: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">product_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ç¼ºè´§:  request </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">requested_quantity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, available </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">available_quantity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¢å•ç›¸å…³å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ShoppingError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è®¢å•ç›¸å…³å¼‚å¸¸&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderValidationError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OrderError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è®¢å•éªŒè¯é”™è¯¯&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, reason):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.reason </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reason</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¢å•éªŒè¯å¤±è´¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reason</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OrderError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ”¯ä»˜é”™è¯¯&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, payment_method, reason):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.payment_method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payment_method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.reason </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reason</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">payment_method</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> æ”¯ä»˜å¤±è´¥: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reason</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç®€å•çš„è®¢å•å¤„ç†å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> place_order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(product_id, quantity):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ¨¡æ‹Ÿå•†å“æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¬”è®°æœ¬ç”µè„‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ™ºèƒ½æ‰‹æœº&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å•†å“ 3 ä¸å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯å•†å“æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> products:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProductNotFoundError(product_id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯å•†å“åº“å­˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    available_stock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> products[product_id][</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> available_stock:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProductOutOfStockError(product_id, quantity, available_stock)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯è®¢å•æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OrderValidationError(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¢å•æ•°é‡å¿…é¡»å¤§äºé›¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ¨¡æ‹Ÿæ”¯ä»˜è¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ”¯ä»˜é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        pass</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PaymentError(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿¡ç”¨å¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®¢å•æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¢å•æˆåŠŸ: å•†å“ ID </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">product_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, æ•°é‡ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">quantity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;order_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ç»ƒä¹ 4-ä¸Šä¸‹æ–‡ç®¡ç†å™¨-å‚è€ƒå®ç°" tabindex="-1">ç»ƒä¹ 4ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆå‚è€ƒå®ç°ï¼‰ <a class="header-anchor" href="#ç»ƒä¹ 4-ä¸Šä¸‹æ–‡ç®¡ç†å™¨-å‚è€ƒå®ç°" aria-label="Permalink to â€œç»ƒä¹ 4ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆå‚è€ƒå®ç°ï¼‰â€">â€‹</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TimerContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, label):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> label</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.start_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __enter__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.start_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¯ä»¥è¿”å›ä»»æ„å€¼ï¼Œè¿™é‡Œè¿”å›selfä¾›withè¯­å¥ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __exit__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        end_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        execution_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> end_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.start_time</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.label</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">execution_time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.4f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç§’&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è¿”å›Falseè¡¨ç¤ºå¼‚å¸¸ä¼šç»§ç»­ä¼ æ’­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><h2 id="ğŸ“š-å­¦ä¹ èµ„æºæ¨è" tabindex="-1">ğŸ“š å­¦ä¹ èµ„æºæ¨è <a class="header-anchor" href="#ğŸ“š-å­¦ä¹ èµ„æºæ¨è" aria-label="Permalink to â€œğŸ“š å­¦ä¹ èµ„æºæ¨èâ€">â€‹</a></h2><ul><li><strong>Pythonå®˜æ–¹æ–‡æ¡£ - å¼‚å¸¸å¤„ç†</strong>ï¼š<a href="https://docs.python.org/zh-cn/3/tutorial/errors.html" target="_blank" rel="noreferrer">https://docs.python.org/zh-cn/3/tutorial/errors.html</a></li><li><strong>Real Python - Python å¼‚å¸¸å¤„ç†æŒ‡å—</strong>ï¼š<a href="https://realpython.com/python-exceptions/" target="_blank" rel="noreferrer">https://realpython.com/python-exceptions/</a></li><li><strong>Python Cookbook - å¼‚å¸¸å¤„ç†</strong>ï¼š<a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/chapters/p08_error_and_exceptions.html" target="_blank" rel="noreferrer">https://python3-cookbook.readthedocs.io/zh_CN/latest/chapters/p08_error_and_exceptions.html</a></li><li><strong>Effective Python - ç¬¬8æ¡ï¼šå­¦ä¼šä½¿ç”¨ with è¯­å¥å¤„ç†èµ„æº</strong>ï¼š<a href="https://effectivepython.com/2015/03/10/consider-coroutines-to-run-many-functions-concurrently" target="_blank" rel="noreferrer">https://effectivepython.com/2015/03/10/consider-coroutines-to-run-many-functions-concurrently</a></li><li><strong>Fluent Python - ç¬¬15ç« ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨å’Œ else å—</strong>ï¼š<a href="https://www.oreilly.com/library/view/fluent-python-2nd/9781492056348/" target="_blank" rel="noreferrer">https://www.oreilly.com/library/view/fluent-python-2nd/9781492056348/</a></li></ul><p>æ­å–œä½ å®Œæˆäº†å¼‚å¸¸å¤„ç†è¿›é˜¶çš„æ‰€æœ‰ç»ƒä¹ ï¼ğŸ‰ é€šè¿‡è¿™äº›ç»ƒä¹ ï¼Œä½ å·²ç»æŒæ¡äº†Pythonå¼‚å¸¸å¤„ç†çš„é«˜çº§æŠ€å·§å’Œæœ€ä½³å®è·µã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè®°å¾—æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å¼‚å¸¸å¤„ç†ç­–ç•¥ï¼Œåˆ›å»ºæ¸…æ™°ã€æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¹¶å§‹ç»ˆä¿æŒå¼‚å¸¸å¤„ç†ä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ æ­å–œä½ å®Œæˆäº†å¼‚å¸¸å¤„ç†è¿›é˜¶çš„æ‰€æœ‰ç»ƒä¹ ï¼ğŸ‰ é€šè¿‡è¿™äº›ç»ƒä¹ ï¼Œä½ å·²ç»æŒæ¡äº†Pythonå¼‚å¸¸å¤„ç†çš„é«˜çº§æŠ€å·§å’Œæœ€ä½³å®è·µã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè®°å¾—æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å¼‚å¸¸å¤„ç†ç­–ç•¥ï¼Œåˆ›å»ºæ¸…æ™°ã€æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¹¶å§‹ç»ˆä¿æŒå¼‚å¸¸å¤„ç†ä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>å¼‚å¸¸å¤„ç†æ˜¯ç¼–å†™å¥å£®è½¯ä»¶çš„å…³é”®æŠ€èƒ½ä¹‹ä¸€ã€‚è‰¯å¥½çš„å¼‚å¸¸å¤„ç†ä¸ä»…å¯ä»¥ä½¿ä½ çš„ç¨‹åºæ›´åŠ ç¨³å®šå¯é ï¼Œè¿˜å¯ä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘ä½“éªŒã€‚ç»§ç»­åŠ æ²¹ï¼Œå°†è¿™äº›çŸ¥è¯†åº”ç”¨åˆ°ä½ çš„å®é™…é¡¹ç›®ä¸­å§ï¼ğŸš€</p>`,60)])])}const o=i(l,[["render",t]]);export{g as __pageData,o as default};
