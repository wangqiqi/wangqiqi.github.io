import{_ as i,c as a,o as h,a2 as n}from"./chunks/framework.BHFiY1p-.js";const g=JSON.parse('{"title":"Yolov5训练与Rknn模型导出并在Rk3588部署（亲测有效）","description":"","frontmatter":{"title":"Yolov5训练与Rknn模型导出并在Rk3588部署（亲测有效）","date":"2025-01-01T16:45:48.000Z","categories":["RK3588"],"tags":["YOLOv5","RK3588","部署"]},"headers":[],"relativePath":"posts/RK3588/yolov5训练与rknn模型导出并在RK3588部署（亲测有效）.md","filePath":"posts/RK3588/yolov5训练与rknn模型导出并在RK3588部署（亲测有效）.md","lastUpdated":1758809068000}'),k={name:"posts/RK3588/yolov5训练与rknn模型导出并在RK3588部署（亲测有效）.md"};function t(l,s,p,e,r,F){return h(),a("div",null,[...s[0]||(s[0]=[n(`<blockquote><p><strong>保姆级教程，看这一篇就够用了。</strong> 在翻阅了网络上很多资料后，发现很多版本的信息比匹配。 花了一周的时间配置环境，以及环境验证，然后写了这篇长文。 有过程，有代码，有经验，欢迎大家批评指正。</p></blockquote><h2 id="一、环境准备" tabindex="-1">一、环境准备 <a class="header-anchor" href="#一、环境准备" aria-label="Permalink to &quot;一、环境准备&quot;">​</a></h2><p>将宿主机和开发板接入同一个局域网，方便开发。</p><h3 id="一-宿主机" tabindex="-1">（一）宿主机 <a class="header-anchor" href="#一-宿主机" aria-label="Permalink to &quot;（一）宿主机&quot;">​</a></h3><ol><li>PC电脑，<code>x86_64</code>, 带显卡, 配置不表, 能训练和开发即可。</li><li>系统： <code>ubuntu 22.04 LTS</code> 版本( <code>ubuntu 18.04 LTS</code> 以上)</li><li>自带的远程软件： <code>Remmina</code> 可以建立 <code>ssh</code> 连接，也可以建立 <code>sftp</code> 连接传输文件。</li><li><code>Anaconda</code>: 可以配置 <code>python</code> 开发的虚拟环境</li><li>需要在宿主机上安装 <strong>RKNN-Toolkit2</strong></li></ol><h4 id="_1-rknn-toolkit2" tabindex="-1">1. RKNN-Toolkit2 <a class="header-anchor" href="#_1-rknn-toolkit2" aria-label="Permalink to &quot;1. RKNN-Toolkit2&quot;">​</a></h4><blockquote><p>用于在 PC 端将用户训练的模型转换为 RKNN 模型。</p></blockquote><p><code>RKNN-Toolkit2</code> 是为用户提供在 <code>PC</code> 平台上进行模型转换、推理和性能评估的开发套件，用户通过该工具提供的<code>Python</code> 接口可以便捷地完成以下功能：</p><ul><li>模型转换：支持 <code>Caffe、TensorFlow、TensorFlowLite、ONNX、DarkNet、PyTorch</code> 等模型转为 <code>RKNN</code> 模型，并支持 <code>RKNN</code> 模型导入导出， <code>RKNN</code> 模型能够在 <code>Rockchip NPU</code> 平台上加载使用。</li><li>量化功能：支持将浮点模型量化为定点模型，目前支持的量化方法为非对称量化（asymmetric_quantized-8），并支持混合量化功能。</li><li>模型推理：能够在 <code>PC（Linux x86平台）</code>上模拟 <code>Rockchip NPU</code> 运行 <code>RKNN</code> 模型并获取推理结果；或将 <code>RKNN</code> 模型分发到指定的 <code>NPU</code> 设备上进行推理并获取推理结果。</li><li>性能和内存评估：将 <code>RKNN</code> 模型分发到指定 <code>NPU</code> 设备上运行，以评估模型在实际设备上运行时的性能和内存占用情况。</li><li>量化精度分析：该功能将给出模型量化前后每一层推理结果与浮点模型推理结果的余弦距离，以便于分析量化误差是如何出现的，为提高量化模型的精度提供思路。</li><li>模型加密功能：使用指定的加密等级将 <code>RKNN</code> 模型整体加密。因为 <code>RKNN</code> 模型的加密是在 <code>NPU</code> 驱动中完成的，使用加密模型时，与普通 <code>RKNN</code> 模型一样加载即可， <code>NPU</code> 驱动会自动对其进行解密。</li></ul><p>目前只支持 <code>Ubuntu 18.04 LTS</code> 以上版本系统。由于 <code>github</code> <a href="https://github.com/rockchip-linux/rknn-toolkit2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit2</a> 下载较慢，可以直接网盘下载:<a href="https://pan.baidu.com/s/1XgQiICR_d1el4kWaYZlorA" target="_blank" rel="noreferrer">百度网盘-RKNN-Toolkit2</a> 提取码: 8888</p><h3 id="二-开发板" tabindex="-1">（二）开发板 <a class="header-anchor" href="#二-开发板" aria-label="Permalink to &quot;（二）开发板&quot;">​</a></h3><ol><li>整机，用的是 <code>RK3588</code> 整机。（<em>NOTE: 我这里用的是定昌电子提供的整机，其他设备没有尝试</em>）</li><li>系统：<code>ubuntu 20.04 LTS</code> 版本</li><li>需要在开发板上安装 <strong>RKNPU2</strong></li></ol><h4 id="_1-rknpu2" tabindex="-1">1. RKNPU2 <a class="header-anchor" href="#_1-rknpu2" aria-label="Permalink to &quot;1. RKNPU2&quot;">​</a></h4><p><code>RKNPU2</code> 提供了高级的接口访问 <code>Rockchip</code> 的 <code>NPU</code> ，可以在板端做很多应用。由于 <code>github</code> <a href="https://github.com/rockchip-linux/rknpu2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu2</a> 下载较慢，可以直接网盘下载: <a href="https://pan.baidu.com/s/1ijegergfBZoJgmHhGDWlWQ" target="_blank" rel="noreferrer">百度网盘-RKNPU2</a> 提取码: 8888</p><blockquote><p><strong>1.4.0</strong></p><ul><li>Support more NPU operators, such as Reshape、Transpose、MatMul、 Max、Min、exGelu、exSoftmax13、Resize etc.</li><li>Add Weight Share function, reduce memory usage.</li><li>Add Weight Compression function, reduce memory and bandwidth usage.(RK3588/RV1103/RV1106)</li><li>RK3588 supports storing weights or feature maps on SRAM, reducing system bandwidth consumption.</li><li>RK3588 adds the function of running a single model on multiple cores at the same time.</li><li>Add new output layout NHWC (C has alignment restrictions) .</li><li>Improve support for non-4D input.</li><li>Add more examples such as rknn_yolov5_android_apk_demo and rknn_internal_mem_reuse_demo.</li><li>Bug fix.</li></ul></blockquote><h4 id="_2-rknn-toolkit2-lite" tabindex="-1">2. RKNN-Toolkit2-Lite <a class="header-anchor" href="#_2-rknn-toolkit2-lite" aria-label="Permalink to &quot;2. RKNN-Toolkit2-Lite&quot;">​</a></h4><blockquote><p><strong>在板端测试运行</strong></p></blockquote><p>-<code> RKNN-Toolkit-Lite2</code> 为 <code>Rockchip NPU</code> 平台（<code>RK3566、RK3568、RK3588、RK3598S</code>）提供 <code>Python</code> 编程接口，帮助用户部署 <code>RKNN</code> 模型并加速 <code>AI</code> 应用程序的实现。</p><blockquote><h4 id="刷机-非必要不刷机" tabindex="-1">刷机（非必要不刷机） <a class="header-anchor" href="#刷机-非必要不刷机" aria-label="Permalink to &quot;刷机（非必要不刷机）&quot;">​</a></h4><p>非必要不刷机，一般情况下购买的板子已经刷好了系统，可以直接运行，我这里只测试了一个板子，其他板子未确定环境是否符合要求。 <strong>刷机工具</strong>: <a href="https://pan.baidu.com/s/1sE4hQkijh_w3ky8rorOOWg" target="_blank" rel="noreferrer">百度网盘-刷机工具</a> 提取码: 8888 <strong>刷机系统</strong>: <a href="https://pan.baidu.com/s/1t1i0kQ6kmMaMN4US-I5OIg" target="_blank" rel="noreferrer">百度网盘-刷机系统</a> 提取码: 8888 刷机过程可以参考(过程类似): <a href="https://blog.csdn.net/zhoujinwang/article/details/127798095" target="_blank" rel="noreferrer">【边缘设备】基于RK3399核心板的nanoPC-T4 线刷桌面版系统</a></p></blockquote><h2 id="二、环境验证" tabindex="-1">二、环境验证 <a class="header-anchor" href="#二、环境验证" aria-label="Permalink to &quot;二、环境验证&quot;">​</a></h2><h3 id="一-板端验证" tabindex="-1">（一）板端验证 <a class="header-anchor" href="#一-板端验证" aria-label="Permalink to &quot;（一）板端验证&quot;">​</a></h3><p><a href="https://pan.baidu.com/s/1MrUXsKV7CxlC5_pdkgg8wg" target="_blank" rel="noreferrer">百度网盘-rknn_yolov5_rk3588_v14</a> 提取码: 8888</p><p>在宿主机上打开 <code>Remmina</code>, 输入 <em>IP地址，用户名，密码</em> 连接开发板。将以上文件下载后，放到开发板上，并解压。 <img src="https://img-blog.csdnimg.cn/9c763fa19fdb47a4b551721051f216b0.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/83c6e9315b3c49da89b7b04dc044bfb3.png" alt="在这里插入图片描述"> 可以看到在 <code>RK3588</code> 上利用 <code>NPU</code> 运行 <code>yolov5</code> 模型，耗时在 <code>33.8 ms</code> 左右。板端环境已经具备。</p><h3 id="二-rknn-toolkit2-lite-板端" tabindex="-1">（二）RKNN-Toolkit2-Lite(板端) <a class="header-anchor" href="#二-rknn-toolkit2-lite-板端" aria-label="Permalink to &quot;（二）RKNN-Toolkit2-Lite(板端)&quot;">​</a></h3><h4 id="_1-安装-miniconda" tabindex="-1">1. 安装 <code>Miniconda</code> <a class="header-anchor" href="#_1-安装-miniconda" aria-label="Permalink to &quot;1. 安装 \`Miniconda\`&quot;">​</a></h4><p>在板端下载 <a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank" rel="noreferrer">Miniconda</a>， 版本为 <img src="https://img-blog.csdnimg.cn/72b62b3ea01f42559abe75849d0845e8.png" alt="在这里插入图片描述"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Miniconda3-py39_23.3.1-0-Linux-aarch64.sh</span></span></code></pre></div><p>一路安装直到成功。</p><h4 id="_2-虚拟环境" tabindex="-1">2. 虚拟环境 <a class="header-anchor" href="#_2-虚拟环境" aria-label="Permalink to &quot;2. 虚拟环境&quot;">​</a></h4><p>在<strong>板端</strong>安装完成后。创建并激活虚拟环境</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span></code></pre></div><p>进入 <code>rknn_toolkit_lite2</code> 目录，</p><h4 id="_3-安装环境依赖" tabindex="-1">3. 安装环境依赖 <a class="header-anchor" href="#_3-安装环境依赖" aria-label="Permalink to &quot;3. 安装环境依赖&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/rknn_toolkit_lite2-1.4.0-cp39-cp39-linux_aarch64.whl</span></span></code></pre></div><p>如果安装较慢，修改国内的 <code>pip</code> 源，</p><p><code>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</code></p><p>如果缺少其他包库，直接用 <code>pip</code> 进行安装。</p><h4 id="_4-测试验证" tabindex="-1">4. 测试验证 <a class="header-anchor" href="#_4-测试验证" aria-label="Permalink to &quot;4. 测试验证&quot;">​</a></h4><p>进入目录 <code>examples/inference_with_lite</code> ，</p><p>执行 <code>python test.py</code> 即可。</p><p>至此，板端的 rknn_toolkit_lite2 已经安装和验证完毕。后续可以在板端进行开发和部署 <code>python</code> 程序。</p><p><strong>NOTE</strong></p><blockquote><p>如果执行 <code>python test.py</code> 提示缺少 <code>librknnrt.so</code> 或 <code>librga.so</code> 库，请在 github 下载，或者在其他目录下将 <code>librknnrt.so</code> 或 <code>librga.so</code> 拷贝至 <code>/usr/lib</code> 目录中。</p></blockquote><p>如果想在板端打开终端时默认启动 rknn 的虚拟环境，</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><p>在里面添加 <code>conda activate rknn</code></p><h3 id="三-宿主机" tabindex="-1">（三）宿主机 <a class="header-anchor" href="#三-宿主机" aria-label="Permalink to &quot;（三）宿主机&quot;">​</a></h3><h4 id="_1-创建并激活虚拟环境" tabindex="-1">1. 创建并激活虚拟环境 <a class="header-anchor" href="#_1-创建并激活虚拟环境" aria-label="Permalink to &quot;1. 创建并激活虚拟环境&quot;">​</a></h4><p><strong>安装 <code>rknn</code> 虚拟环境</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span></code></pre></div><p><strong>安装 <code>pytorch</code> 虚拟环境</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytorch</span></span></code></pre></div><p>这里可以简单一点，创建 <code>pytorch </code>环境的依赖, 也可以按照 <code>pytorch</code> 官方教程下载相应的包。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ultralytics</span></span></code></pre></div><p>缺啥补啥: <code>pip install xx</code></p><h4 id="_2-安装依赖" tabindex="-1">2. 安装依赖 <a class="header-anchor" href="#_2-安装依赖" aria-label="Permalink to &quot;2. 安装依赖&quot;">​</a></h4><p>进入 rknn 虚拟环境, 并进入 <code>rknn-toolkit2</code> 目录,</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doc/requirements_cp38-1.4.0.txt</span></span></code></pre></div><blockquote><p><strong>requirements_cp38-1.4.0.txt</strong> 文件内容如下：</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># if install failed, please change the pip source to &#39;https://mirror.baidu.com/pypi/simple&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># base deps</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numpy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.19.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">protobuf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=3.12.2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flatbuffers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.12</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># utils</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">requests</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=2.27.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">psutil</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=5.9.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruamel.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">==0.17.4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scipy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.5.4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tqdm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=4.64.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bfloat16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opencv-python</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=4.5.5.64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># base</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onnx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.9.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onnxoptimizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.2.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onnxruntime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.10.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1.10.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torchvision</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.11.2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tensorflow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=2.6.2</span></span></code></pre></div><h4 id="_3-安装环境" tabindex="-1">3. 安装环境 <a class="header-anchor" href="#_3-安装环境" aria-label="Permalink to &quot;3. 安装环境&quot;">​</a></h4><p>进入 rknn 虚拟环境, 并进入 <code>rknn-toolkit2</code> 目录</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/rknn_toolkit2-1.4.0_22dcfef4-cp38-cp38-linux_x86_64.whl</span></span></code></pre></div><h4 id="_4-进入-rknn-虚拟环境-并验证是否安装成功-rknn" tabindex="-1">4. 进入 rknn 虚拟环境, 并验证是否安装成功 <code>rknn</code> <a class="header-anchor" href="#_4-进入-rknn-虚拟环境-并验证是否安装成功-rknn" aria-label="Permalink to &quot;4. 进入 rknn 虚拟环境, 并验证是否安装成功 \`rknn\`&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span></code></pre></div><p><img src="https://img-blog.csdnimg.cn/75c10e6f648941ffa331eedbf865c6f0.png" alt="在这里插入图片描述"></p><p><code>python</code> 进入开发环境</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rknn.api </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RKNN</span></span></code></pre></div><p>没有报错，就说明 <code>RKNN</code> 已经安装成功。</p><h4 id="_5-测试" tabindex="-1">5. 测试 <a class="header-anchor" href="#_5-测试" aria-label="Permalink to &quot;5. 测试&quot;">​</a></h4><p>在<strong>宿主机</strong>上，进入 <code>rknn</code> 虚拟环境，</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> examples/onnx/yolov5/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tree</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bus.jpg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataset.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test.py</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yolov5s.onnx</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test.py</span></span></code></pre></div><p><img src="https://img-blog.csdnimg.cn/ce07d68875724ba89bf2cb3031600b43.png" alt="在这里插入图片描述"></p><h4 id="_6-将-rknn-模型放到板端验证" tabindex="-1">6. 将 <code>rknn</code> 模型放到板端验证 <a class="header-anchor" href="#_6-将-rknn-模型放到板端验证" aria-label="Permalink to &quot;6. 将 \`rknn\` 模型放到板端验证&quot;">​</a></h4><p>将上述步骤生成的 <code>yolov5s.rknn</code> 放到板端测试。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> librga.so</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> librknnrt.so</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RK356X</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yolov5s-640-640.rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RK3588</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yolov5s-640-640.rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yolov5s.rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RV110X</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yolov5s-640-640.rknn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bus.jpg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coco_80_labels_list.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> out.jpg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn_yolov5_demo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testYolov5_rk3588.sh</span></span></code></pre></div><p>修改 <strong>板端</strong> 文件</p><p><code>bash testYolov5_rk3588.sh</code> 中的</p><p><code>./rknn_yolov5_demo model/RK3588/yolov5s-640-640.rknn model/bus.jpg</code></p><p>为</p><p><code>./rknn_yolov5_demo model/RK3588/yolov5s.rknn model/bus.jpg</code>。</p><p>并在板端执行 <code>bash testYolov5_rk3588.sh</code></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ztl@ztl:~/workspace/demo_rknn_yolov5_rk3588_v14$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testYolov5_rk3588.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> box_conf_threshold</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.25,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nms_threshold</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.45</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model/bus.jpg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> width</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 640,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> height</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 640</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Loading</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RKNN:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [05:25:08.050] failed to check rknpu hardware version: 0x46495245</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RKNN:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [05:25:08.050] This rknn model is </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RK3566, but current platform is RK3588</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RKNN:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [05:25:08.050] rknn_init, load model failed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rknn_init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ret=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span></span></code></pre></div><p>出现报错信息，重新在宿主机平台上设置平台信息；</p><p>将</p><p><code>rknn.config(mean_values=[[0, 0, 0]], std_values=[[255, 255, 255]])</code></p><p>修改为</p><p><code>rknn.config(mean_values=[[0, 0, 0]], std_values=[[255, 255, 255]], target_platform=&#39;rk3588&#39;)</code></p><p>并重新执行</p><p><code>python test.py</code></p><p>生成 <code>yolov5s.rknn</code> 模型并上传到板端对应位置。</p><p>重新在板端执行 <code>bash testYolov5_rk3588.sh</code>，运行效果正常。</p><p>至此，已经可以在 <strong>宿主机</strong> 上用给定的 <code>demo</code> 转换模型，并将模型上传到 <strong>板端</strong> ，可以正确运行。</p><blockquote><p><strong>NOTE：共有四种方式开发和部署</strong></p><ul><li>第一种是借助 <code>RKNN-Toolkit2</code> 的功能在模拟 <code>NPU</code> 上运行 <code>RKNN</code> 模型并获取推理结果（在PC端）</li><li>第二种是借助 <code>RKNN-Toolkit2</code> 的功能, 将板子与 <code>PC</code> 连接，将 <code>RKNN</code> 模型分发到指定的 <code>NPU</code> 设备进行推理并获取推理结果（网络推理在板端，脚本写在 <code>PC</code> 端）</li><li>第三种是调用 <code>RKNN SDK</code> 的 <code>C/C++</code> 语言 <code>API</code> 进行测试代码编写，并使用交叉编译器进行编译，将得到的可执行文件拷贝到板子上运行（开发编译在 <code>PC</code> 端，运行在板端），此处也可以通过 <code>VS Code</code> 连接板端，在板端开发应用。</li><li>第四种是在板端安装 <code>rknn-toolkit2-lite</code> 工具，使用 <code>python</code> 脚本在板端推理（代码开发运行都在板端）</li></ul></blockquote><h2 id="三、yolov5-训练自己的模型" tabindex="-1">三、yolov5 训练自己的模型 <a class="header-anchor" href="#三、yolov5-训练自己的模型" aria-label="Permalink to &quot;三、yolov5 训练自己的模型&quot;">​</a></h2><h3 id="一-虚拟环境再次验证" tabindex="-1">（一）虚拟环境再次验证 <a class="header-anchor" href="#一-虚拟环境再次验证" aria-label="Permalink to &quot;（一）虚拟环境再次验证&quot;">​</a></h3><p>我的电脑上有多个虚拟环境，一个是 <code>pytorch</code> ( 常用的深度学习框架的虚拟环境 ), 一个是 <code>rknn</code>( 就是之前安装 <code>toolkit2</code> 时新建的虚拟环境)。</p><p><strong>pytorch虚拟环境信息</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxx@desk:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytorch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytorch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxx@desk:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.10.11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (main, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Apr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 19:02:41</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) [GCC 11.2.0] on linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;help&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;copyright&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;credits&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;license&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torchvision</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">torch.__version__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.0.0+cu117</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">torchvision.__version__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.15.1+cu117</span></span></code></pre></div><p><strong>rknn虚拟环境信息</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxx@desk:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rknn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxx@desk:~$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.8.16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (default, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 03:21:46</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[GCC 11.2.0] :: Anaconda, Inc. on linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;help&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;copyright&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;credits&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;license&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torchvision</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">torch.__version__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.10.1+cu102</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">torchvision.__version__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.11.2+cu102</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt;</span></span></code></pre></div><h3 id="二-仓库源码" tabindex="-1">（二）仓库源码 <a class="header-anchor" href="#二-仓库源码" aria-label="Permalink to &quot;（二）仓库源码&quot;">​</a></h3><p>直接下载 <a href="https://github.com/wangqiqi/yolov5" target="_blank" rel="noreferrer">rknn_dev yolov5 github</a>，并切换到 <code>rknn_dev</code> 分支</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/wangqiqi/yolov5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn_dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 切换到 rknn_dev 分支</span></span></code></pre></div><p><a href="https://github.com/ultralytics/yolov5/releases/tag/v5.0" target="_blank" rel="noreferrer">预训练模型下载地址</a><a href="https://objects.githubusercontent.com/github-production-release-asset-2e65be/264818686/56dd3480-9af3-11eb-9c92-3ecd167961dc?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230504%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230504T073902Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=0230f16ac8e61ed06b8ae51e69cca351941ba0bb4de6ba9f39688f42fecf355e&amp;X-Amz-SignedHeaders=host&amp;actor_id=3182451&amp;key_id=0&amp;repo_id=264818686&amp;response-content-disposition=attachment%3B%20filename%3Dyolov5s.pt&amp;response-content-type=application%2Foctet-stream" target="_blank" rel="noreferrer">yolov5s</a></p><h3 id="三-训练" tabindex="-1">（三）训练 <a class="header-anchor" href="#三-训练" aria-label="Permalink to &quot;（三）训练&quot;">​</a></h3><h4 id="_1-标注数据" tabindex="-1">1. 标注数据 <a class="header-anchor" href="#_1-标注数据" aria-label="Permalink to &quot;1. 标注数据&quot;">​</a></h4><p>可以用 <code>cvat</code> 或者 <code>labelme</code> 或者其他工具对检测数据进行标注。</p><p>在 <code>yolov5</code> 同级目录新建一个 <code>datasets</code> 文件夹，将标注好的数据打包到项目名称文件夹，然后放到 <code>datasets</code> 目录下，后续其他项目也可以同样进行。</p><h4 id="_2-修改参数" tabindex="-1">2. 修改参数 <a class="header-anchor" href="#_2-修改参数" aria-label="Permalink to &quot;2. 修改参数&quot;">​</a></h4><h5 id="_1-修改-data-proj-yaml" tabindex="-1">（1）修改 <code>./data/proj.yaml</code> <a class="header-anchor" href="#_1-修改-data-proj-yaml" aria-label="Permalink to &quot;（1）修改 \`./data/proj.yaml\`&quot;">​</a></h5><p>在 <code>yolov5</code> 文件下找到 <code>data</code> 目录，新建一个 <code>proj.yaml</code> 文件，类似于 <code>drp.yaml</code>。</p><p>修改 <code>proj.yaml</code> 中的 <code>nc</code> 和 <code>names</code>;</p><p><code>nc</code>: 类别数 <code>names</code>: 类别名称列表</p><h5 id="_2-修改-config-onekey-sh" tabindex="-1">（2）修改 <code>config_onekey.sh</code> <a class="header-anchor" href="#_2-修改-config-onekey-sh" aria-label="Permalink to &quot;（2）修改 \`config_onekey.sh\`&quot;">​</a></h5><p>根据项目要求，修改 <code>config_onekey.sh</code> 文件中的相关参数；</p><p>例如:</p><p><code>__PRJNAME</code>, <code>__EPOCHSZ</code>, <code>__BATCHSZ</code>, <code>__IMSZ</code> 等等。</p><h4 id="_3-开始一键训练" tabindex="-1">3. 开始一键训练 <a class="header-anchor" href="#_3-开始一键训练" aria-label="Permalink to &quot;3. 开始一键训练&quot;">​</a></h4><p><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong></p><p>下载预训练模型到 <code>yolov5</code> 同级目录 <code>pre-trained</code> 文件夹下，预训练模型下载地址</p><p><a href="https://github.com/ultralytics/yolov5/releases/tag/v5.0" target="_blank" rel="noreferrer">预训练模型下载地址</a><a href="https://objects.githubusercontent.com/github-production-release-asset-2e65be/264818686/56dd3480-9af3-11eb-9c92-3ecd167961dc?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230504%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230504T073902Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=0230f16ac8e61ed06b8ae51e69cca351941ba0bb4de6ba9f39688f42fecf355e&amp;X-Amz-SignedHeaders=host&amp;actor_id=3182451&amp;key_id=0&amp;repo_id=264818686&amp;response-content-disposition=attachment%3B%20filename%3Dyolov5s.pt&amp;response-content-type=application%2Foctet-stream" target="_blank" rel="noreferrer">yolov5s</a></p><p>在训练之前确定 <code>./models/yolo.py</code> 文件中的 <code>class Detect(nn.Module):</code> 类 <code>line:55</code> 里 <code>forward</code> 代码是否解注释了。</p><p><strong>如果训练， <code>forward</code> 应为</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, x):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># inference output</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.nl):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            x[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.m[i](x[i])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># conv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        ## 此处如果是训练, 请解开以下注释</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            bs, _, ny, nx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[i].shape  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># x(bs,255,20,20) to x(bs,3,20,20,85)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            x[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[i].view(bs, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.na, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.no, ny, nx).permute(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).contiguous()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.training:  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># inference</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.grid[i].shape[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[i].shape[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.onnx_dynamic:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.grid[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._make_grid(nx, ny).to(x[i].device)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x[i].sigmoid()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.inplace:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.grid[i]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.stride[i]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># xy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.anchor_grid[i]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># wh</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># for YOLOv5 on AWS Inferentia https://github.com/ultralytics/yolov5/pull/2953</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    xy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">. </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.grid[i]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.stride[i]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># xy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    wh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.anchor_grid[i].view(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.na, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># wh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.cat((xy, wh, y[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:]), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                z.append(y.view(bs, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.no))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.training </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (torch.cat(z, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), x)</span></span></code></pre></div><p><strong>开始一键训练</strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onekey_bash/train.sh</span></span></code></pre></div><p><em>终端显示如下:</em></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxxx@desk:~/workspace/algo/yolov5_rknn$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onekey_bash/train.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">train:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weights=../pre-trained/yolov5s.pt,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cfg=,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> data=data/drp.yaml,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hyp=data/hyps/hyp.scratch.yaml,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> epochs=100,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batch_size=32,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> imgsz=320,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rect=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resume=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nosave=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> noval=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> noautoanchor=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> evolve=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bucket=,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cache=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image_weights=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> device=,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multi_scale=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> single_cls=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adam=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync_bn=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workers=8,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project=runs/train,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entity=None,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name=drp,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exist_ok=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quad=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linear_lr=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> label_smoothing=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upload_dataset=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbox_interval=-1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save_period=-1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artifact_alias=latest,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local_rank=-1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> freeze=0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> patience=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ⚠️</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YOLOv5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1203</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commits.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone git@github.com:wangqiqi/yolov5\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">YOLOv5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 🚀</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c5360f6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2.0.0+cu117</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CUDA:0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (NVIDIA </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GeForce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RTX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4090,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 24209.125MB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hyperparameters:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lr0=0.01,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lrf=0.2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> momentum=0.937,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight_decay=0.0005,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warmup_epochs=3.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warmup_momentum=0.8,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> warmup_bias_lr=0.1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> box=0.05,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cls=0.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cls_pw=1.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> obj=1.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> obj_pw=1.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iou_t=0.2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anchor_t=4.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fl_gamma=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hsv_h=0.015,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hsv_s=0.7,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hsv_v=0.4,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> degrees=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> translate=0.1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale=0.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shear=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perspective=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flipud=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fliplr=0.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mosaic=1.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mixup=0.0,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> copy_paste=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Weights</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Biases:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pip install wandb&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> automatically</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> track</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> visualize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YOLOv5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 🚀</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (RECOMMENDED)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TensorBoard:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tensorboard --logdir runs/train&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> view</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:6006/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Overriding</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model.yaml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nc=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nc=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    params</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                  arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      3520</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     [3, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">32,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     18560</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [32, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">64,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     18816</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [64, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">64,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     73984</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [64, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    156928</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [128, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    295424</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [128, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    625152</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1180672</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">512,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    656896</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.SPP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       [512, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">512,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [5, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">9,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13]]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1182720</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [512, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">512,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> False]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    131584</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [512, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 11</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  torch.nn.modules.upsampling.Upsample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [None, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nearest&#39;]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           [-1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">6]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    [1]                           </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 13</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    361984</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [512, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> False]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 14</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     33024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  torch.nn.modules.upsampling.Upsample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [None, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nearest&#39;]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           [-1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    [1]                           </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     90880</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> False]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 18</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    147712</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [128, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">128,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 19</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          [-1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">14]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    [1]                           </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    296448</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> False]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 21</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    590336</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Conv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [256, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          [-1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.Concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    [1]                           </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1182720</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.common.C3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        [512, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">512,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> False]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [17, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">20,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     16182</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  models.yolo.Detect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      [1, [[10, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">13,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 30,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 33,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23],</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [30, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">61,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 62,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 45,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 59,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 119],</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [116, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">90,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 156,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 198,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 373,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 326]],</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [128, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">256,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 512]]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ....</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ....</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ....</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Epoch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   gpu_mem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       obj</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       cls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  img_size</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     98/99</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     1.76G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   0.02157</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.007322</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       320:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">███████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 59/59</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:04&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">13.07it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               Class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Images</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          P</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     mAP@.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mAP@.5:.95:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">███████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 30/30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:03&lt;00:00,  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7.54it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1860</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       3277</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.979</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.962</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.991</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.727</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Epoch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   gpu_mem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       obj</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       cls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  img_size</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     99/99</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     1.76G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    0.0217</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.007213</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       320:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">███████████████████████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 59/59</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:04&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">12.90it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">               Class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Images</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          P</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     mAP@.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mAP@.5:.95:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">███████████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 30/30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:04&lt;00:00,  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">6.66it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       1860</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       3277</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.979</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.967</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.992</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0.737</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> epochs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> completed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.244</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hours.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Optimizer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stripped</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs/train/drp/weights/last.pt,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 14.3MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Optimizer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stripped</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs/train/drp/weights/best.pt,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 14.3MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Results</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs/train/drp</span></span></code></pre></div><h3 id="四-导出模型" tabindex="-1">（四）导出模型 <a class="header-anchor" href="#四-导出模型" aria-label="Permalink to &quot;（四）导出模型&quot;">​</a></h3><p><strong>前提条件: 已经创建了虚拟环境 <code>rknn</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>rknn</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>rknn</code></strong></p><blockquote><p><strong>问题及解决方案</strong><a href="https://blog.csdn.net/weixin_41653613/article/details/128699982#:~:text=%E8%A7%A3%E5%86%B3%20AttributeError%3A%20module%20%E2%80%98%20numpy%20%E2%80%98%20has%20no,numpy.%20int%20%E6%9B%B4%E6%94%B9%E4%B8%BA%20numpy.%20int%20_%EF%BC%8C%20int%20%E3%80%82" target="_blank" rel="noreferrer">解决 AttributeError: module ‘numpy‘ has no attribute ‘int‘ 训练yolo时的问题</a> 原因：np.int在NumPy 1.20中已弃用，在NumPy 1.24中已删除。 <a href="https://blog.csdn.net/Thebest_jack/article/details/125649451" target="_blank" rel="noreferrer">一步真实解决RuntimeError: result type Float can‘t be cast to the desired output type long int</a></p></blockquote><p>在训练之前确定 <code>./models/yolo.py</code> 文件中的 <code>class Detect(nn.Module):</code> 类 <code>line:55</code> 里 <code>forward</code> 代码是否注释了。</p><p>此时应修改 forward 代码为:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> forward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, x):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># inference output</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.nl):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            x[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.m[i](x[i])  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># conv</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 此处如果是训练, 请注释</span></span></code></pre></div><h4 id="_1-修改参数" tabindex="-1">1. 修改参数 <a class="header-anchor" href="#_1-修改参数" aria-label="Permalink to &quot;1. 修改参数&quot;">​</a></h4><ol><li>修改 <code>config_onekey.sh</code> 相关参数</li><li>将测试用的图片放到 <code>export</code> 文件夹下，修改 <code>proj_dataset.txt</code> 的内容为自己的图片列表</li></ol><h4 id="_2-开始一键导出" tabindex="-1">2. 开始一键导出 <a class="header-anchor" href="#_2-开始一键导出" aria-label="Permalink to &quot;2. 开始一键导出&quot;">​</a></h4><p><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong><strong>前提条件: 已经创建了虚拟环境 <code>pytorch</code></strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onekey_bash/export_rknn.sh</span></span></code></pre></div><p><em>终端显示如下:</em></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jxxx@desk:~/workspace/algo/yolov5_rknn$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onekey_bash/export_rknn.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">export:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weights=runs/train/drp/weights/best.pt,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> img_size=[320],</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batch_size=1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> device=cpu,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> include=[&#39;torchscript&#39;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;onnx&#39;],</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> half=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inplace=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> train=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> optimize=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dynamic=False,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> simplify=True,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> opset=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">YOLOv5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 🚀</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c5360f6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2.0.0+cu117</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CPU</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Fusing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> layers...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Model</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Summary:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 224</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> layers,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7053910</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> parameters,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gradients,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GFLOPs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PyTorch:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs/train/drp/weights/best.pt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (14.3 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TorchScript:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> torch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2.0.0+cu117...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TorchScript:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> success,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runs/train/drp/weights/best.torchscript.pt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (28.3 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ONNX:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> onnx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1.13.1...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> buiding</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rknn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runtime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> environment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">W</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init_runtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Target</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> None,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> simulator!</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.3333333333333333,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.3333333333333333</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 70.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Analysing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">███████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 161/161</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:00&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5866.87it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Preparing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">█████████████████████████████████████████████████</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 161/161</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [00:04&lt;00:00, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">39.76it/s]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">W</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inference:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ndarray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (320, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) is wrong, expect dims is 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Try</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">W</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inference:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ndarray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (320, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) is wrong, expect dims is 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Try</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">W</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inference:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ndarray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (320, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) is wrong, expect dims is 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Try</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">W</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inference:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ndarray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (320, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) is wrong, expect dims is 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Try</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dims</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">320,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 320,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.8913032412528992</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (159.54501259326935, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">145.2426918745041</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">177.8633736371994,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 186.3882895708084</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.8837643265724182</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (82.14642906188965, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">183.73637676239014</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">110.66749000549316,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 226.49699115753174</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.8643947243690491</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (146.98097324371338, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">140.67060202360153</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">164.14344692230225,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 166.86144143342972</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.8264284729957581</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (110.99540531635284, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">146.92019426822662</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">130.9836596250534,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 177.2033714056015</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7860860824584961</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (146.88146114349365, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">127.81136840581894</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">163.5996789932251,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 148.1453576683998</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7520475387573242</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (170.8560609817505, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123.72485554218292</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">185.6856870651245,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 143.04388225078583</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> person,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.6209931373596191</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">box</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> coordinate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topleft:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (108.76676034927368, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">133.68206477165222</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), bottomright: (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">119.2998595237732,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 156.40799260139465</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>成功后，可以看到 <code>export</code> 文件下多了 <code>rknn</code> 模型。</p><p><img src="https://img-blog.csdnimg.cn/1bbad072629147b4afd87bbca3fb675e.png" alt="在这里插入图片描述"></p><h3 id="五-部署测试模型-见下一篇博文" tabindex="-1">（五）部署测试模型（见下一篇博文） <a class="header-anchor" href="#五-部署测试模型-见下一篇博文" aria-label="Permalink to &quot;（五）部署测试模型（见下一篇博文）&quot;">​</a></h3><p><a href="https://blog.csdn.net/zhoujinwang/article/details/130563729?spm=1001.2014.3001.5502" target="_blank" rel="noreferrer">【边缘设备】yolov5训练与rknn模型导出并在RK3588部署（亲测有效）二</a></p><h2 id="附录信息" tabindex="-1">附录信息 <a class="header-anchor" href="#附录信息" aria-label="Permalink to &quot;附录信息&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>仓库</strong></th><th style="text-align:left;"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://github.com/rockchip-linux/rknpu2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu2</a></td><td style="text-align:left;">RKNPU2 provides an advanced interface to access Rockchip NPU.<br><strong>Support Platform</strong>：<br> - RK3566/RK3568<br>- <strong>RK3588/RK3588S</strong>- RV1103/RV1106<br>Note: The rknn model <strong>must be generated</strong> using <br>RKNN Toolkit 2: <a href="https://github.com/rockchip-linux/rknn-toolkit2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit2</a></td></tr><tr><td style="text-align:left;"><a href="https://github.com/rockchip-linux/rknn-toolkit2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit2</a></td><td style="text-align:left;">RKNN-Toolkit2 is a software development kit for users to<br>perform model conversion, inference and performance evaluation on PC <br>and Rockchip NPU platforms (RK3566, RK3568, <strong>RK3588</strong>, RK3588S, RV1103, RV1106).<br>RKNN-Toolkit-Lite2 provides Python programming interfaces for Rockchip NPU platform <br>(RK3566, RK3568, <strong>RK3588</strong>, RK3588S) to help users deploy RKNN models and <br>accelerate the implementation of AI applications.<br><br>For the deployment of the RKNN model, please refer to:<br><a href="https://github.com/rockchip-linux/rknpu2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu2</a> <br><br>For RK1808/RV1109/RV1126/RK3399Pro, please use:<br><a href="https://github.com/rockchip-linux/rknn-toolkit" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit</a><br><a href="https://github.com/rockchip-linux/rknpu" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu</a><br><a href="https://github.com/airockchip/RK3399Pro_npu" target="_blank" rel="noreferrer">https://github.com/airockchip/RK3399Pro_npu</a><strong>NOTES:</strong><br>- Currently rknn-toolkit2 is not compatible with <a href="https://github.com/rockchip-linux/rknn-toolkit" target="_blank" rel="noreferrer">rknn-toolkit</a><br>- Currently only support on Ubuntu 18.04 python 3.6 / Ubuntu 20.04 python 3.8<br>- Latest version:1.4.0(Release version)</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"></td></tr></tbody></table><table tabindex="0"><thead><tr><th>平台</th><th>仓库</th></tr></thead><tbody><tr><td>RK3566/RK3568/<strong>RK3588/RK3588S</strong>/RV1103/RV1106</td><td><a href="https://github.com/rockchip-linux/rknn-toolkit2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit2</a><br><a href="https://github.com/rockchip-linux/rknpu2" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu2</a></td></tr><tr><td>RK1808/RK1806/RV1109/RV1126</td><td><a href="https://github.com/rockchip-linux/rknn-toolkit" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit</a><br><a href="https://github.com/rockchip-linux/rknpu" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknpu</a></td></tr><tr><td>RK3399Pro</td><td><a href="https://github.com/rockchip-linux/rknn-toolkit" target="_blank" rel="noreferrer">https://github.com/rockchip-linux/rknn-toolkit</a><a href="https://github.com/airockchip/RK3399Pro_npu" target="_blank" rel="noreferrer"><br>https://github.com/airockchip/RK3399Pro_npu</a></td></tr></tbody></table><h3 id="规格书" tabindex="-1">规格书 <a class="header-anchor" href="#规格书" aria-label="Permalink to &quot;规格书&quot;">​</a></h3><p><a href="https://www.rock-chips.com/uploads/pdf/2022.8.26/191/RK3588%20Brief%20Datasheet.pdf" target="_blank" rel="noreferrer">3588 Datasheet</a></p><p><img src="https://img-blog.csdnimg.cn/a951656f12804b88b2944b7515477af3.png" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/fca1c2d2fd0840268e1fc01937fa267a.png" alt="在这里插入图片描述"></p><h2 id="参考-以下为编撰本文的引用参考" tabindex="-1">参考（以下为编撰本文的引用参考） <a class="header-anchor" href="#参考-以下为编撰本文的引用参考" aria-label="Permalink to &quot;参考（以下为编撰本文的引用参考）&quot;">​</a></h2><ol><li><a href="https://blog.csdn.net/m0_57315535/article/details/128250096" target="_blank" rel="noreferrer">yolov5训练pt模型并转换为rknn模型，部署在RK3588开发板上——从训练到部署全过程</a></li><li><a href="https://zhuanlan.zhihu.com/p/590368969" target="_blank" rel="noreferrer">RK3588模型推理总结</a></li><li><a href="https://wiki.t-firefly.com/zh_CN/ROC-RK3588S-PC/usage_npu.html" target="_blank" rel="noreferrer">NPU使用</a></li><li><a href="https://b23.tv/azNksY6" target="_blank" rel="noreferrer">一步一步教大家使用RK3588的NPU之在电脑端交叉编译yolov5运行在ARM平台上-哔哩哔哩</a></li><li><a href="https://b23.tv/tUyY8Hw" target="_blank" rel="noreferrer">转换yolov5s.onnx为rknn模型RK3588主板实时推理和电脑端模拟推理-哔哩哔哩</a></li><li><a href="https://b23.tv/4HE82Tj" target="_blank" rel="noreferrer">摆脱电脑，直接在RK3588平台上推理，帮用户部署 RKNN 模加速 AI 应用的落地-哔哩哔哩</a>】</li><li><strong>仓库下载</strong> 参考 <a href="https://github.com/rockchip-linux/rknn-toolkit/tree/master/examples/pytorch/yolov5" target="_blank" rel="noreferrer">rknn-toolkit 教程</a>, 需要切换到 commit ID <code>c5360f6e7009eb4d05f14d1cc9dae0963e949213</code>, 可以直接在 <a href="https://github.com/ultralytics/yolov5" target="_blank" rel="noreferrer">官网github下载</a>， 然后终端执行 <code>git checkout c5360f6e7</code>。</li></ol>`,157)])])}const o=i(k,[["render",t]]);export{g as __pageData,o as default};
